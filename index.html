<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>reveal.js</title>

  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/beige.css">
  <link rel="stylesheet" href="assets/custom.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section>
      <h2>Javascript <br/>the darker side of the engine</h2>
      <small>Kemal Erdem | <a href="https://github.com/burnpiro">github.com/burnpiro</a></small>
      <aside class="notes"></aside>
    </section>

    <section>
      <section>
        <p><strong>JS is a strange language</strong></p>
        <p class="fragment">Many implementations</p>
        <p class="fragment">Multiple platforms</p>
        <aside class="notes">
          JS is described by TC39 comity and then implemented by engine providers<br/>
          There are multiple JS engines like Chakra, V8, JSC, JerryScript, SpiderMonkey
          JS is supported on many platforms like x86, x64, arm, powerpc, mips<br/>
        </aside>
      </section>
    </section>

    <section>
      <h2>Compiled or Interpreted?</h2>
      <p class="fragment">It depends...</p>
      <aside class="notes">
        Each engine is different but some of them didn't even interpret JS just compile it
      </aside>
    </section>

    <section>
      <h3>Main flow in JS Engine</h3>
      <img class="stretch" src="assets/jsEngineFlow.svg"/>
      <aside class="notes">
        Not every engine is has interpreter<br />
        Many optimizing compilers available<br />
        Optimization issue?
      </aside>
    </section>

    <section>
      <h2>AST (Abstract Syntax Tree)</h2>
      <div style="display: flex; flex-direction: row">
        <pre style="width: 100%; margin: 0">
          <code class="javascript" data-trim>
            function addA(a,b) {
              const weirdConstant = 10
              return a + b + weirdConstant
            }
            const c = addA(4,5)
					</code>
        </pre>
        <img src="assets/AST-simple.svg" style="width: 100%; height: 100%"/>
      </div>
      <aside class="notes">
        Layer by layer <br />
        Two scopes generated
      </aside>
    </section>

    <section>
      <p>forEach polyfill in JS</p>
      <img src="assets/AST-forEach.svg" style="width: 100%; height: 100%"/>
      <aside class="notes">
        forEach polyfill in JS<br/>
      </aside>
    </section>

    <section>
      <p>forEach polyfill in JS</p>
      <pre style="width: 100%; height: 100%; margin: 0">
        <code class="javascript" data-trim style="font-size: 12px; line-height: 18px;">
          Array.prototype.forEach = function (callback, thisArg) {
            var T, k
            if (this == null) {
              throw new TypeError(' this is null or not defined')
            }
            var O = Object(this)
            var len = O.length >>> 0
            if (typeof callback !== 'function') {
              throw new TypeError(callback + ' is not a function')
            }
            if (arguments.length > 1) {
              T = thisArg
            }
            k = 0
            while (k < len) {
              var kValue
              if (k in O) {
                kValue = O[k]
                callback.call(T, kValue, k, O)
              }
              k++
            }
          }
        </code>
      </pre>
      <aside class="notes">
        forEach polyfill in JS<br/>
      </aside>
    </section>

    <section>
      <h2>Interpreter</h2>
      <p>Fast and generate bytecode</p>
      <aside class="notes">JIT (Just In Time) compiler<br/>
        Separate login from rendering<br/>
      </aside>
    </section>

    <section>
      <h2>Optimizing Compilers</h2>
      <p>Used only for "HOT" functions</p>
      <aside class="notes">If to long we can cancel<br/>
        Assets consuming<br/>
      </aside>
    </section>

    <section>
      <p>Before dinosaurs => 2008</p>
      <img src="assets/2008v8.svg" style="height: 60%" />
    </section>

    <section>
      <p>2010 - First optimizing compiler</p>
      <img src="assets/2010v8.svg" style="height: 60%" />
    </section>

    <section>
      <p>2014 - Lets add more of them?</p>
      <img src="assets/2014v8.svg" style="height: 60%" />
    </section>

    <section>
      <h2>Era of optimizing compilers</h2>
      <p>Crankshaft and full codegen</p>
      <p>Other engines follow using even more than 2 compilers per engine</p>
      <aside class="notes">
        Layout is scoped globally<br/>
        No need to run it manually<br/>
      </aside>
    </section>

    <section>
      <p>2016 - Interpreter idea</p>
      <img src="assets/2016v8.svg" style="height: 60%" />
    </section>

    <section data-background="assets/dumbl.jpg">
      <h2 style="color: #fff; text-shadow:
    -4px -4px 0 #000,
    4px -4px 0 #000,
    -4px 4px 0 #000,
    4px 4px 0 #000; margin-top: 40vh">Do you see, Harry? Do you see the flaw in my brilliant plan now?</h2>
    </section>

    <section>
      <h2>The flaw?</h2>
      <img class="fragment" src="assets/ASTToCompilers.svg" style="height: 60%" />
      <aside class="notes">
        AST was interpreted by both interpreter and all of the compilers<br/>
        Chrome changed that in newest version
      </aside>
    </section>

    <section>
      <p>2017 - Back to the future</p>
      <img src="assets/2017v8.svg" style="height: 60%" />
    </section>

    <section>
      <h2>Thanks</h2>
      <h4>Questions?</h4>
      <small>Kemal Erdem | <a href="https://github.com/burnpiro">github.com/burnpiro</a></small>
    </section>
  </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // More info https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    history: true,

    // More info https://github.com/hakimel/reveal.js#dependencies
    dependencies: [
      {src: 'plugin/markdown/marked.js'},
      {src: 'plugin/markdown/markdown.js'},
      {src: 'plugin/notes/notes.js', async: true},
      {
        src: 'plugin/highlight/highlight.js', async: true, callback: function () {
        hljs.initHighlightingOnLoad();
      }
      }
    ]
  });
</script>
</body>
</html>
